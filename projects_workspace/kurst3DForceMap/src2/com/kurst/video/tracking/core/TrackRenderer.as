/********************************************************************************************************************************************************************************
 * 
 * Class Name  	: 
 * Version 	  	: 
 * Description 	: 
 * 
 ********************************************************************************************************************************************************************************
 * 
 * Author 		: 
 * Date 			: 
 * 
 ********************************************************************************************************************************************************************************
 * 
 * METHODS
 * 
 *
 * PROPERTIES
 * 
 *
 * EVENTS
 * 
 * 
 ********************************************************************************************************************************************************************************
 * 				:
 *
 *
 *********************************************************************************************************************************************************************************
 * NOTES			: -default-background-color #000000
 **********************************************************************************************************************************************************************************/
package com.kurst.video.tracking.core {
	import com.kurst.video.tracking.renderer.XYSRenderer;
	import com.kurst.video.tracking.renderer.FourPointRenderer;
	import com.kurst.video.tracking.renderer.IRenderer;
	import com.kurst.video.tracking.settings.TrackType;
	import com.kurst.video.tracking.data.Tracker;

	public class TrackRenderer {
		// ------------------------------------------------------------------------------------------------------------------------------------------------------------
		private var timelineData : Tracker;
		private var _renderer : IRenderer;

		// ------------------------------------------------------------------------------------------------------------------------------------------------------------
		public function TrackRenderer(_timelineData : Tracker) {
			timelineData = _timelineData;
			init();
		}

		// ------------------------------------------------------------------------------------------------------------------------------------------------------------
		// -PUBLIC-----------------------------------------------------------------------------------------------------------------------------------------------------
		// ------------------------------------------------------------------------------------------------------------------------------------------------------------
		/**
		 * @method render( frame : int ) : void
		 * @tooltip render a frame of the tracked data
		 * @param frameNumber : int
		 */
		public function render(frame : int) : void {
			_renderer.render(frame);
		}

		/**
		 * @method dispose() : void 
		 * @tooltip clean up / destroy and dispost TrackRenderer
		 */
		public function dispose() : void {
			_renderer.destroy();
			_renderer = null;
		}

		public function updateData(_tracker : Tracker) : void {
			if ( _renderer )
				_renderer.updateData(_tracker);
		}

		// ------------------------------------------------------------------------------------------------------------------------------------------------------------
		// -PRIVATE -----------------------------------------------------------------------------------------------------------------------------------------------------
		// ------------------------------------------------------------------------------------------------------------------------------------------------------------
		/**
		 * @method 
		 * @tooltip
		 * @param
		 * @return
		 */
		private function init() : void {
			switch ( timelineData.type ) {
				case TrackType.FOUR_POINT :
					_renderer = new FourPointRenderer();
					_renderer.init(timelineData);
					break;
				case TrackType.XY_SCALE:
					_renderer = new XYSRenderer();
					_renderer.init(timelineData);
					break;
			}
		}

		// ------------------------------------------------------------------------------------------------------------------------------------------------------------
		// -GET / SET -----------------------------------------------------------------------------------------------------------------------------------------------------
		// ------------------------------------------------------------------------------------------------------------------------------------------------------------
		/**
		 * @method 
		 * @tooltip
		 * @param
		 * @return
		 */
		public function get renderer() : IRenderer {
			return _renderer;
		}
	}
}